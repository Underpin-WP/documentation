"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[311],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>d});var n=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var a=n.createContext({}),l=function(e){var t=n.useContext(a),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},p=function(e){var t=l(e.components);return n.createElement(a.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,s=e.originalType,a=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),m=l(r),d=o,h=m["".concat(a,".").concat(d)]||m[d]||u[d]||s;return r?n.createElement(h,i(i({ref:t},p),{},{components:r})):n.createElement(h,i({ref:t},p))}));function d(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var s=r.length,i=new Array(s);i[0]=m;var c={};for(var a in t)hasOwnProperty.call(t,a)&&(c[a]=t[a]);c.originalType=e,c.mdxType="string"==typeof e?e:o,i[1]=c;for(var l=2;l<s;l++)i[l]=r[l];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},6396:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>a,contentTitle:()=>i,default:()=>u,frontMatter:()=>s,metadata:()=>c,toc:()=>l});var n=r(7462),o=(r(7294),r(3905));const s={},i="List Sorter",c={unversionedId:"reference/helpers/processors/list-sorter",id:"reference/helpers/processors/list-sorter",title:"List Sorter",description:"A list sorter makes it possible to sort items from an array of objects using a chain-able query syntax. This feature",source:"@site/docs/reference/helpers/processors/list-sorter.md",sourceDirName:"reference/helpers/processors",slug:"/reference/helpers/processors/list-sorter",permalink:"/reference/helpers/processors/list-sorter",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"List Filter",permalink:"/reference/helpers/processors/list-filter"},next:{title:"Registries",permalink:"/reference/registries/"}},a={},l=[{value:"Usage",id:"usage",level:2},{value:"Custom Sorting Method",id:"custom-sorting-method",level:2}],p={toc:l};function u(e){let{components:t,...r}=e;return(0,o.kt)("wrapper",(0,n.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"list-sorter"},"List Sorter"),(0,o.kt)("p",null,"A list sorter makes it possible to sort items from an array of objects using a chain-able query syntax. This feature\nis built-into ",(0,o.kt)("a",{parentName:"p",href:"/reference/registries/object-registries"},"Object Registries")," via the ",(0,o.kt)("inlineCode",{parentName:"p"},"Object_Registry::query")," method,\nhowever it can also be used on raw arrays, as long as each item in the array has the same getters and setters you're\nsorting by. This can be done using fully-qualified objects, or by simply converting arrays to objects, as shown below."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-php"},"use \\Underpin\\Helpers\\Processors\\List_Filter;\n\n$ice_cream_order_items = [\n  (object) [\n      'customer' => (object)['name' => 'Alex', 'id' => 1],\n      'scoops' => ['strawberry','chocolate'],\n      'cone' => 'waffle',\n      'price' => 629,\n      'toppings' => ['cheese-crackers']\n  ],\n  \n  (object) [\n      'customer' => (object)['name' => 'Devin', 'id' => 2],\n      'scoops' => ['chocolate'],\n      'cone' => 'chocolate_waffle',\n      'price' => 429,\n      'toppings' => ['sprinkles']\n  ],\n  \n  (object) [\n      'customer' => (object)['name' => 'Kate', 'id' => 3],\n      'scoops' => ['vanilla'],\n      'cone' => 'basic',\n      'price' => 429,\n      'toppings' => []\n  ],\n  \n  (object) [\n      'customer' => (object)['name' => 'Ben', 'id' => 4],\n      'scoops' => ['strawberry','chocolate', 'vanilla'], \n      'cone' => 'bowl',\n      'price' => 899,\n      'toppings' => ['sprinkles']\n  ],\n];\n")),(0,o.kt)("h2",{id:"usage"},"Usage"),(0,o.kt)("p",null,"Sort items by price"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-php"},"$sorted = (new List_Sorter($ice_cream_order_items))->sort_by('price')->sort()\n$sorted_reverse = (new List_Sorter($ice_cream_order_items))->sort_by('price', Direction::Descending)->sort()\n")),(0,o.kt)("p",null,"Nested object values are supported. Sort items by customer name."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-php"},"$sorted = (new List_Sorter($ice_cream_order_items))->sort_by('customer.name')->sort()\n$sorted_reverse = (new List_Sorter($ice_cream_order_items))->sort_by('customer.name', Direction::Descending)->sort()\n")),(0,o.kt)("h2",{id:"custom-sorting-method"},"Custom Sorting Method"),(0,o.kt)("p",null,"The default sorting method provided in ",(0,o.kt)("inlineCode",{parentName:"p"},"List_Sorter")," is sufficient for most cases, however, if you need to create a custom sorting algorithm for it, this can be done by extending the ",(0,o.kt)("inlineCode",{parentName:"p"},"Sort_Method")," class."),(0,o.kt)("p",null,"The example below creates a custom sorting method that makes it possible to sort items based on the number of items in the array. This allows us to sort the ice cream orders by the number of scoops."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-php"},"use Underpin\\Abstracts\\Sort_Method;\nuse \\Underpin\\Helpers\\Object_Helper;\n\n// First create the sorter.\nclass Array_Count_Sorter extends Sort_Method{\n\n  // The sort method is called on each item, and works much like usort, except it also includes the field name and the direction.\n  public function sort( object $a, object $b, string $field, Direction $direction ): int\n  {\n    // The spaceship operator will return -1, 0, or 1 based on the result. See PHP docs.\n    $result = count(Object_Helper::pluck($a, $field)) <=> count(Object_Helper::pluck($b, $field));\n\n    // Invert the result if it's descending, otherwise simply return the result as-is.\n    return $direction === Direction::Descending ? $result * -1 : $result;\n  }\n}\n\n// Use the custom sorter method with scoops.\n$sorted = (new List_Sorter($ice_cream_order_items))\n    ->sort_by(field: 'scoops', method: Array_Count_Sorter::class)\n    ->sort();\n\n// Use the custom sorter method with scoops, only this time reverse it, Missy Elliott style.\n$sorted_reverse = (new List_Sorter($ice_cream_order_items))\n    ->sort_by(field: 'scoops', direction: Direction::Descending, method: Array_Count_Sorter::class)\n    ->sort();\n")))}u.isMDXComponent=!0}}]);